@model BookWise.Web.Models.Book
@{
    var coverUrl = string.IsNullOrWhiteSpace(Model.CoverImageUrl)
        ? Url.Content("~/img/book-placeholder.svg")
        : Model.CoverImageUrl!;
    var statusKey = Model.Status?.ToLowerInvariant();
    var statusLabel = statusKey switch
    {
        "reading" => "In progress",
        "read" => "Completed",
        "plan-to-read" => "On deck",
        _ => Model.Status ?? string.Empty
    };
}

<a class="book-item" asp-page="/BookDetails" asp-route-id="@Model.Id">
    <div class="book-cover">
        <img src="@coverUrl" alt="@Model.Title cover" loading="lazy" />
    </div>
    <h3 class="book-title">@Model.Title</h3>
    @if (!string.IsNullOrWhiteSpace(Model.Author))
    {
        <p class="book-author">@Model.Author</p>
    }
    @if (Model.PersonalRating.HasValue || Model.PublicRating.HasValue)
    {
        <div class="book-ratings">
            @if (Model.PersonalRating.HasValue)
            {
                <span class="book-rating-chip">My @Model.PersonalRating.Value.ToString("0.0")</span>
            }
            @if (Model.PublicRating.HasValue)
            {
                <span class="book-rating-chip book-rating-chip--community">Community @Model.PublicRating.Value.ToString("0.0")</span>
            }
        </div>
    }
    @if (!string.IsNullOrWhiteSpace(statusLabel))
    {
        <span class="book-status" data-status="@statusKey">@statusLabel</span>
    }
</a>
